{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["// eslint-disable-next-line no-unused-vars\nimport React, { useState } from 'react';\nimport opencage from 'opencage-api-client';\n// import styles from './styles.module.css';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const OpenCageSearch = ({\n  // this is a test API key which always returns \"Friedrich-Ebert-Stra\\u00dfe 7, 48153 M\\u00fcnster, Germany\",\n  apiKey = '6d0e711d72d74daeb2b0bfd2a5cdfdba',\n  className,\n  disabled,\n  error,\n  id,\n  label,\n  name,\n  placeholder,\n  required,\n  searchOnBlur = true,\n  searchOnKeyUp = false,\n  value = '',\n}) => {\n  const [search, setSearch] = useState('');\n  const [input, setInput] = useState(value);\n  const [results, setResults] = useState([]);\n  const handleChange = (e) => {\n    setInput(e.target.value);\n  };\n  const handleSearch = async (e) => {\n    // console.log(e)\n    const q = e.target.value;\n    if (!q) return;\n    if (q === search) return;\n    try {\n      const apiResults = await opencage.geocode({ q, key: apiKey });\n      setSearch(q);\n      setResults(apiResults);\n      // console.log(results);\n    } catch (err) {\n      console.error('Error from API', { status: err.status.code });\n    }\n  };\n  const handleSelect = (a) => {\n    setInput(a);\n    setResults([]);\n  };\n  return (\n    <div className=\"opencage_geocoder_wrapper\">\n      {label && (\n        <label className=\"opencage_geocoder_label\">\n          {label}\n          {required ? ' *' : null}\n        </label>\n      )}\n      <input\n        id={id}\n        name={name}\n        type=\"text\"\n        className={className}\n        placeholder={placeholder}\n        value={input}\n        required={required}\n        disabled={disabled}\n        error={error}\n        onBlur={(e) => {\n          e.preventDefault();\n          if (searchOnBlur) handleSearch(e);\n        }}\n        onChange={handleChange}\n        onKeyUp={(e) => {\n          e.preventDefault();\n          if (searchOnKeyUp && (e.key === 'Enter' || e.keyCode === 13)) {\n            handleSearch(e);\n          }\n        }}\n      />\n      {results && results.results && results.results.length > 0 && (\n        <ul className=\"opencage-geocoder-result-list\">\n          {results.results.map((res, idx) => (\n            <li\n              key={idx}\n              className=\"opencage-geocoder-result-element\"\n              onClick={(e) => {\n                e.preventDefault();\n                handleSelect(res.formatted);\n              }}\n            >\n              {res.formatted}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n"],"names":["OpenCageSearch","apiKey","className","disabled","error","id","label","name","placeholder","required","searchOnBlur","searchOnKeyUp","value","search","setSearch","useState","input","setInput","results","setResults","handleChange","e","target","handleSearch","q","apiResults","opencage","geocode","key","err","console","status","code","handleSelect","a","preventDefault","keyCode","length","map","res","idx","formatted"],"mappings":"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"}